{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<h1>Dashboard</h1>

<section>
    <h2>User Counts</h2>
    <div class="stat-grid">
        <article class="stat-card">
            <h2>{{ user_counts.total }}</h2>
            <p>Total Users</p>
        </article>
        <article class="stat-card">
            <h2>{{ user_counts.students }}</h2>
            <p>Students</p>
        </article>
        <article class="stat-card">
            <h2>{{ user_counts.teachers }}</h2>
            <p>Teachers</p>
        </article>
        <article class="stat-card">
            <h2>{{ user_counts.administrators }}</h2>
            <p>Administrators</p>
        </article>
        <article class="stat-card">
            <h2>{{ user_counts.other }}</h2>
            <p>Other</p>
        </article>
    </div>
</section>

<section>
    <h2>Last Sync</h2>
    {% match last_sync %}
    {% when Some with (sync) %}
    <article>
        <table>
            <tbody>
                <tr><td><strong>Provider</strong></td><td>{{ sync.provider }}</td></tr>
                <tr><td><strong>Status</strong></td><td><span class="status-badge status-{{ sync.status_class }}">{{ sync.status_label }}</span></td></tr>
                <tr><td><strong>Started</strong></td><td>{{ sync.started_at }}</td></tr>
                <tr><td><strong>Users Synced</strong></td><td>{{ sync.users_synced }}</td></tr>
                <tr><td><strong>Orgs Synced</strong></td><td>{{ sync.orgs_synced }}</td></tr>
                <tr><td><strong>Courses Synced</strong></td><td>{{ sync.courses_synced }}</td></tr>
                <tr><td><strong>Classes Synced</strong></td><td>{{ sync.classes_synced }}</td></tr>
                <tr><td><strong>Enrollments Synced</strong></td><td>{{ sync.enrollments_synced }}</td></tr>
            </tbody>
        </table>
    </article>
    {% when None %}
    <p>No sync runs recorded yet.</p>
    {% endmatch %}
</section>

<section>
    <h2>Database</h2>
    <article>
        <table>
            <tbody>
                <tr><td><strong>Driver</strong></td><td>{{ db_driver }}</td></tr>
                <tr><td><strong>Path</strong></td><td>{{ db_path }}</td></tr>
            </tbody>
        </table>
    </article>
</section>
{% endblock %}
